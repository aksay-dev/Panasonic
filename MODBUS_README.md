# MODBUS Slave –¥–ª—è —Ç–µ–ø–ª–æ–≤–æ–≥–æ –Ω–∞—Å–æ—Å–∞ Panasonic Aquarea

## üöÄ –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è MODBUS –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

–ü—Ä–æ–µ–∫—Ç Panasonic —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞–µ—Ç **–ø–æ–ª–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é MODBUS slave** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏.

### üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ MODBUS

- **UART1** –¥–ª—è MODBUS (UART2 –¥–ª—è —Ç–µ–ø–ª–æ–≤–æ–≥–æ –Ω–∞—Å–æ—Å–∞)
- **–†–µ–∂–∏–º RTU** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π RS485
- **–ê–¥—Ä–µ—Å slave: 7** (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- **–°–∫–æ—Ä–æ—Å—Ç—å: 9600 bps** (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- **GPIO 25/26/NC** –¥–ª—è TX/RX/RTS (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)

### üîß –¢–∏–ø—ã —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ MODBUS

#### 1. **Input Registers (0x0000-0x0FFF)** - –¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ
–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–µ–ø–ª–æ–≤–æ–≥–æ –Ω–∞—Å–æ—Å–∞

#### 2. **Holding Registers (0x1000-0x1FFF)** - –ß—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å  
–ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–ø–ª–æ–≤—ã–º –Ω–∞—Å–æ—Å–æ–º

#### 3. **Coils (0x2000-0x2FFF)** - –ß—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å
–ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### 4. **Discrete Inputs (0x3000-0x3FFF)** - –¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ
–°—Ç–∞—Ç—É—Å—ã –∞–≤–∞—Ä–∏–π –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π

## üìã –ö–∞—Ä—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ MODBUS

### Input Registers (0x0000-0x0FFF) - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

| –ê–¥—Ä–µ—Å | –ü–∞—Ä–∞–º–µ—Ç—Ä | –ï–¥–∏–Ω–∏—Ü—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|---------|----------|
| 0x0003 | free_memory | KB | –°–≤–æ–±–æ–¥–Ω–∞—è –ø–∞–º—è—Ç—å |
| 0x0004-0x0005 | uptime | - | –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã |
| 0x0006 | status | - | –°—Ç–∞—Ç—É—Å (0=–æ—Ñ–ª–∞–π–Ω, 1=–æ–Ω–ª–∞–π–Ω) |
| 0x0007-0x0008 | last_update | - | –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

#### –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã (0x0010-0x001F)
| –ê–¥—Ä–µ—Å | –ü–∞—Ä–∞–º–µ—Ç—Ä | –ï–¥–∏–Ω–∏—Ü—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|---------|----------|
| 0x0010 | main_inlet_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –Ω–∞ –≤—Ö–æ–¥–µ |
| 0x0011 | main_outlet_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –Ω–∞ –≤—ã—Ö–æ–¥–µ |
| 0x0012 | dhw_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ì–í–° |
| 0x0013 | outside_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –Ω–∞—Ä—É–∂–Ω–æ–≥–æ –≤–æ–∑–¥—É—Ö–∞ |
| 0x0014 | buffer_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –±—É—Ñ–µ—Ä–Ω–æ–≥–æ –±–∞–∫–∞ |
| 0x0015 | solar_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Å–æ–ª–Ω–µ—á–Ω–æ–≥–æ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞ |
| 0x0016 | pool_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –±–∞—Å—Å–µ–π–Ω–∞ |
| 0x0017 | z1_room_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø–æ–º–µ—â–µ–Ω–∏—è –∑–æ–Ω—ã 1 |
| 0x0018 | z1_water_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤–æ–¥—ã –∑–æ–Ω—ã 1 |
| 0x0019 | z2_room_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø–æ–º–µ—â–µ–Ω–∏—è –∑–æ–Ω—ã 2 |
| 0x001A | z2_water_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤–æ–¥—ã –∑–æ–Ω—ã 2 |
| 0x001B | compressor_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–∞ |
| 0x001C | evaporator_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∏—Å–ø–∞—Ä–∏—Ç–µ–ª—è |
| 0x001D | condensor_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–∞ |
| 0x001E | inverter_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∏–Ω–≤–µ—Ä—Ç–æ—Ä–∞ |
| 0x001F | outdoor_coil_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –Ω–∞—Ä—É–∂–Ω–æ–π –∫–∞—Ç—É—à–∫–∏ |

#### –ú–æ—â–Ω–æ—Å—Ç–∏ –∏ —ç–Ω–µ—Ä–≥–∏—è (0x0020-0x002D)
| –ê–¥—Ä–µ—Å | –ü–∞—Ä–∞–º–µ—Ç—Ä | –ï–¥–∏–Ω–∏—Ü—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|---------|----------|
| 0x0020 | heat_power_production | kW*100 | –ú–æ—â–Ω–æ—Å—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ —Ç–µ–ø–ª–∞ |
| 0x0021 | heat_power_consumption | kW*100 | –ú–æ—â–Ω–æ—Å—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Ç–µ–ø–ª–∞ |
| 0x0022 | cool_power_production | kW*100 | –ú–æ—â–Ω–æ—Å—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ —Ö–æ–ª–æ–¥–∞ |
| 0x0023 | cool_power_consumption | kW*100 | –ú–æ—â–Ω–æ—Å—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Ö–æ–ª–æ–¥–∞ |
| 0x0024 | dhw_power_production | kW*100 | –ú–æ—â–Ω–æ—Å—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –ì–í–° |
| 0x0025 | dhw_power_consumption | kW*100 | –ú–æ—â–Ω–æ—Å—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ì–í–° |
| 0x0026 | total_energy_heat | kWh*100 | –û–±—â–∞—è —ç–Ω–µ—Ä–≥–∏—è –æ—Ç–æ–ø–ª–µ–Ω–∏—è |
| 0x0027 | total_energy_cool | kWh*100 | –û–±—â–∞—è —ç–Ω–µ—Ä–≥–∏—è –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è |
| 0x0028 | total_energy_dhw | kWh*100 | –û–±—â–∞—è —ç–Ω–µ—Ä–≥–∏—è –ì–í–° |
| 0x0029 | compressor_freq | Hz | –ß–∞—Å—Ç–æ—Ç–∞ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–∞ |
| 0x002A | pump_speed | RPM | –°–∫–æ—Ä–æ—Å—Ç—å –Ω–∞—Å–æ—Å–∞ |
| 0x002B | pump_flow | –ª/–º–∏–Ω*10 | –ü–æ—Ç–æ–∫ –Ω–∞—Å–æ—Å–∞ |
| 0x002C | pump_duty | % | –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å–æ—Å–∞ |
| 0x002D | max_pump_duty | % | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å–æ—Å–∞ |

#### –°–æ—Å—Ç–æ—è–Ω–∏—è –∏ —Ä–µ–∂–∏–º—ã (0x0030-0x003F)
| –ê–¥—Ä–µ—Å | –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|----------|
| 0x0030 | heatpump_state | 0/1 | –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–µ–ø–ª–æ–≤–æ–≥–æ –Ω–∞—Å–æ—Å–∞ |
| 0x0031 | pump_state | 0/1 | –°–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞—Å–æ—Å–∞ |
| 0x0032 | operation_mode | 0-6 | –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã |
| 0x0033 | quiet_mode | 0-3 | –¢–∏—Ö–∏–π —Ä–µ–∂–∏–º |
| 0x0034 | powerful_mode | 0-90 | –ú–æ—â–Ω—ã–π —Ä–µ–∂–∏–º (–º–∏–Ω) |
| 0x0035 | holiday_mode | 0/1 | –†–µ–∂–∏–º –æ—Ç–ø—É—Å–∫–∞ |
| 0x0036 | force_dhw | 0/1 | –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –Ω–∞–≥—Ä–µ–≤ –ì–í–° |
| 0x0037 | force_defrost | 0/1 | –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Ä–∞–∑–º–æ—Ä–æ–∑–∫–∞ |
| 0x0038 | force_sterilization | 0/1 | –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å—Ç–µ—Ä–∏–ª–∏–∑–∞—Ü–∏—è |
| 0x0039 | defrosting_state | 0/1 | –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–∞–∑–º–æ—Ä–æ–∑–∫–∏ |
| 0x003A | threeway_valve_state | 0/1 | –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ç—Ä–µ—Ö—Ö–æ–¥–æ–≤–æ–≥–æ –∫–ª–∞–ø–∞–Ω–∞ |
| 0x003B | zones_state | 0/1 | –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–æ–Ω |
| 0x003C | main_schedule_state | 0/1 | –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è |
| 0x003D | dhw_heater_state | 0/1 | –°–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞–≥—Ä–µ–≤–∞—Ç–µ–ª—è –ì–í–° |
| 0x003E | room_heater_state | 0/1 | –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–Ω–∞—Ç–Ω–æ–≥–æ –Ω–∞–≥—Ä–µ–≤–∞—Ç–µ–ª—è |
| 0x003F | internal_heater_state | 0/1 | –°–æ—Å—Ç–æ—è–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –Ω–∞–≥—Ä–µ–≤–∞—Ç–µ–ª—è |

#### –ó–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å–æ—Å—ã (0x0040-0x0046)
| –ê–¥—Ä–µ—Å | –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|----------|
| 0x0040 | z1_water_pump | 0/1 | –ù–∞—Å–æ—Å –∑–æ–Ω—ã 1 |
| 0x0041 | z2_water_pump | 0/1 | –ù–∞—Å–æ—Å –∑–æ–Ω—ã 2 |
| 0x0042 | pool_water_pump | 0/1 | –ù–∞—Å–æ—Å –±–∞—Å—Å–µ–π–Ω–∞ |
| 0x0043 | solar_water_pump | 0/1 | –°–æ–ª–Ω–µ—á–Ω—ã–π –Ω–∞—Å–æ—Å |
| 0x0044 | z1_pump_state | 0/1 | –°–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞—Å–æ—Å–∞ –∑–æ–Ω—ã 1 |
| 0x0045 | z2_pump_state | 0/1 | –°–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞—Å–æ—Å–∞ –∑–æ–Ω—ã 2 |
| 0x0046 | pump_flowrate_mode | 0/1 | –†–µ–∂–∏–º –ø–æ—Ç–æ–∫–∞ –Ω–∞—Å–æ—Å–∞ |

### Holding Registers (0x1000-0x1FFF) - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

#### –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (0x1000-0x100F)
| –ê–¥—Ä–µ—Å | –ö–æ–º–∞–Ω–¥–∞ | –ó–Ω–∞—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|---------|----------|----------|
| 0x1000 | set_heatpump | 0/1 | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–µ–ø–ª–æ–≤–æ–≥–æ –Ω–∞—Å–æ—Å–∞ |
| 0x1001 | set_pump | 0/1 | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞—Å–æ—Å–∞ |
| 0x1002 | set_max_pump_duty | 0-100 | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞—Å–æ—Å–∞ (%) |
| 0x1003 | set_quiet_mode | 0-3 | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–∏—Ö–∏–π —Ä–µ–∂–∏–º |
| 0x1004 | set_powerful_mode | 0-90 | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–æ—â–Ω—ã–π —Ä–µ–∂–∏–º (–º–∏–Ω) |
| 0x1005 | set_operation_mode | 0-6 | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã |
| 0x1006 | set_holiday_mode | 0/1 | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–µ–∂–∏–º –æ—Ç–ø—É—Å–∫–∞ |
| 0x1007 | set_force_dhw | 0/1 | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –Ω–∞–≥—Ä–µ–≤ –ì–í–° |
| 0x1008 | set_force_defrost | 0/1 | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—É—é —Ä–∞–∑–º–æ—Ä–æ–∑–∫—É |
| 0x1009 | set_force_sterilization | 0/1 | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—É—é —Å—Ç–µ—Ä–∏–ª–∏–∑–∞—Ü–∏—é |
| 0x100A | set_main_schedule | 0/1 | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ |
| 0x100B | set_reset | 0/1 | –°–±—Ä–æ—Å —Å–∏—Å—Ç–µ–º—ã |
| 0x100C | set_zones | 0-2 | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–æ–Ω—ã |
| 0x100D | set_external_control | 0/1 | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–Ω–µ—à–Ω–µ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |
| 0x100E | set_external_error | 0/1 | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∏–≥–Ω–∞–ª –≤–Ω–µ—à–Ω–µ–π –æ—à–∏–±–∫–∏ |
| 0x100F | set_external_compressor_control | 0/1 | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–Ω–µ—à–Ω–µ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–æ–º |

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (0x1010-0x1015)
| –ê–¥—Ä–µ—Å | –ö–æ–º–∞–Ω–¥–∞ | –ó–Ω–∞—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|---------|----------|----------|
| 0x1010 | set_external_heat_cool_control | 0/1 | –í–Ω–µ—à–Ω–µ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–ø–ª–æ/—Ö–æ–ª–æ–¥ |
| 0x1011 | set_bivalent_control | 0/1 | –ë–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |
| 0x1012 | set_bivalent_mode | 0-2 | –†–µ–∂–∏–º –±–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
| 0x1013 | set_alt_external_sensor | 0/1 | –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–Ω–µ—à–Ω–∏–π –¥–∞—Ç—á–∏–∫ |
| 0x1014 | set_external_pad_heater | 0-2 | –í–Ω–µ—à–Ω–∏–π –ø–æ–¥–æ–≥—Ä–µ–≤ –ø–æ–¥–¥–æ–Ω–∞ |
| 0x1015 | set_buffer | 0/1 | –ë—É—Ñ–µ—Ä–Ω—ã–π –±–∞–∫ |

#### –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω—ã–µ —É—Å—Ç–∞–≤–∫–∏ (0x1020-0x1028)
| –ê–¥—Ä–µ—Å | –ö–æ–º–∞–Ω–¥–∞ | –ï–¥–∏–Ω–∏—Ü—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|---------|---------|----------|
| 0x1020 | set_z1_heat_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –Ω–∞–≥—Ä–µ–≤–∞ –∑–æ–Ω—ã 1 |
| 0x1021 | set_z1_cool_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è –∑–æ–Ω—ã 1 |
| 0x1022 | set_z2_heat_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –Ω–∞–≥—Ä–µ–≤–∞ –∑–æ–Ω—ã 2 |
| 0x1023 | set_z2_cool_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è –∑–æ–Ω—ã 2 |
| 0x1024 | set_dhw_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ì–í–° |
| 0x1025 | set_bivalent_start_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∑–∞–ø—É—Å–∫–∞ –±–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ |
| 0x1026 | set_bivalent_ap_start_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∑–∞–ø—É—Å–∫–∞ AP —Ä–µ–∂–∏–º–∞ |
| 0x1027 | set_bivalent_ap_stop_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ AP —Ä–µ–∂–∏–º–∞ |
| 0x1028 | set_heating_off_outdoor_temp | ¬∞C*100 | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –æ—Ç–æ–ø–ª–µ–Ω–∏—è |

#### –î–µ–ª—å—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (0x1030-0x1036)
| –ê–¥—Ä–µ—Å | –ö–æ–º–∞–Ω–¥–∞ | –ï–¥–∏–Ω–∏—Ü—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|---------|---------|----------|
| 0x1030 | set_buffer_delta | ¬∞C*100 | –î–µ–ª—å—Ç–∞ –±—É—Ñ–µ—Ä–Ω–æ–≥–æ –±–∞–∫–∞ |
| 0x1031 | set_floor_heat_delta | ¬∞C*100 | –î–µ–ª—å—Ç–∞ –Ω–∞–≥—Ä–µ–≤–∞ –ø–æ–ª–∞ |
| 0x1032 | set_floor_cool_delta | ¬∞C*100 | –î–µ–ª—å—Ç–∞ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è –ø–æ–ª–∞ |
| 0x1033 | set_dhw_heat_delta | ¬∞C*100 | –î–µ–ª—å—Ç–∞ –Ω–∞–≥—Ä–µ–≤–∞ –ì–í–° |
| 0x1034 | set_heater_start_delta | ¬∞C*100 | –î–µ–ª—å—Ç–∞ –∑–∞–ø—É—Å–∫–∞ –Ω–∞–≥—Ä–µ–≤–∞—Ç–µ–ª—è |
| 0x1035 | set_heater_stop_delta | ¬∞C*100 | –î–µ–ª—å—Ç–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞–≥—Ä–µ–≤–∞—Ç–µ–ª—è |
| 0x1036 | set_heater_delay_time | –º–∏–Ω | –í—Ä–µ–º—è –∑–∞–¥–µ—Ä–∂–∫–∏ –Ω–∞–≥—Ä–µ–≤–∞—Ç–µ–ª—è |

### Coils (0x2000-0x2FFF) - –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ê–¥—Ä–µ—Å | –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|---------|----------|
| 0x2000 | quick_heatpump_on | –ë—ã—Å—Ç—Ä–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–ø–ª–æ–≤–æ–≥–æ –Ω–∞—Å–æ—Å–∞ |
| 0x2001 | quick_heatpump_off | –ë—ã—Å—Ç—Ä–æ–µ –≤—ã–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–ø–ª–æ–≤–æ–≥–æ –Ω–∞—Å–æ—Å–∞ |
| 0x2002 | quick_pump_on | –ë—ã—Å—Ç—Ä–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞—Å–æ—Å–∞ |
| 0x2003 | quick_pump_off | –ë—ã—Å—Ç—Ä–æ–µ –≤—ã–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞—Å–æ—Å–∞ |
| 0x2004 | quick_dhw_on | –ë—ã—Å—Ç—Ä–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –ì–í–° |
| 0x2005 | quick_dhw_off | –ë—ã—Å—Ç—Ä–æ–µ –≤—ã–∫–ª—é—á–µ–Ω–∏–µ –ì–í–° |
| 0x2006 | quick_defrost | –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑–º–æ—Ä–æ–∑–∫–∞ |
| 0x2007 | quick_sterilization | –ë—ã—Å—Ç—Ä–∞—è —Å—Ç–µ—Ä–∏–ª–∏–∑–∞—Ü–∏—è |

### Discrete Inputs (0x3000-0x3FFF) - –°—Ç–∞—Ç—É—Å—ã

#### –ê–≤–∞—Ä–∏–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (0x3000-0x3007)
| –ê–¥—Ä–µ—Å | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|--------|----------|
| 0x3000 | alarm_compressor | –ê–≤–∞—Ä–∏—è –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä–∞ |
| 0x3001 | alarm_pump | –ê–≤–∞—Ä–∏—è –Ω–∞—Å–æ—Å–∞ |
| 0x3002 | alarm_sensor | –ê–≤–∞—Ä–∏—è –¥–∞—Ç—á–∏–∫–∞ |
| 0x3003 | alarm_communication | –ê–≤–∞—Ä–∏—è —Å–≤—è–∑–∏ |
| 0x3004 | alarm_high_pressure | –ê–≤–∞—Ä–∏—è –≤—ã—Å–æ–∫–æ–≥–æ –¥–∞–≤–ª–µ–Ω–∏—è |
| 0x3005 | alarm_low_pressure | –ê–≤–∞—Ä–∏—è –Ω–∏–∑–∫–æ–≥–æ –¥–∞–≤–ª–µ–Ω–∏—è |
| 0x3006 | alarm_high_temp | –ê–≤–∞—Ä–∏—è –≤—ã—Å–æ–∫–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã |
| 0x3007 | alarm_low_temp | –ê–≤–∞—Ä–∏—è –Ω–∏–∑–∫–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã |

#### –°—Ç–∞—Ç—É—Å—ã —Ä–∞–±–æ—Ç—ã (0x3008-0x300F)
| –ê–¥—Ä–µ—Å | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|--------|----------|
| 0x3008 | status_heating | –°—Ç–∞—Ç—É—Å –æ—Ç–æ–ø–ª–µ–Ω–∏—è |
| 0x3009 | status_cooling | –°—Ç–∞—Ç—É—Å –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è |
| 0x300A | status_dhw | –°—Ç–∞—Ç—É—Å –ì–í–° |
| 0x300B | status_defrosting | –°—Ç–∞—Ç—É—Å —Ä–∞–∑–º–æ—Ä–æ–∑–∫–∏ |
| 0x300C | status_sterilization | –°—Ç–∞—Ç—É—Å —Å—Ç–µ—Ä–∏–ª–∏–∑–∞—Ü–∏–∏ |
| 0x300D | status_holiday | –°—Ç–∞—Ç—É—Å –æ—Ç–ø—É—Å–∫–∞ |
| 0x300E | status_powerful | –°—Ç–∞—Ç—É—Å –º–æ—â–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ |
| 0x300F | status_quiet | –°—Ç–∞—Ç—É—Å —Ç–∏—Ö–æ–≥–æ —Ä–µ–∂–∏–º–∞ |

## üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è

### RS485 —Å—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```
ESP32 (MODBUS)          MAX485              MODBUS Master
GPIO 21 (TXD)    ---->  DI
GPIO 22 (RXD)    <----  RO
GPIO 23 (RTS)    ---->  DE/RE
GND              <----  GND
3.3V             ---->  VCC

RS485 A          <----  A  ----->  A
RS485 B          <----  B  ----->  B
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∏–Ω–æ–≤
- **TX**: GPIO 21 (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `CONFIG_MB_UART_TXD`)
- **RX**: GPIO 22 (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `CONFIG_MB_UART_RXD`)  
- **RTS**: GPIO 23 (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `CONFIG_MB_UART_RTS`)

**–í–Ω–∏–º–∞–Ω–∏–µ**: GPIO 17/18 –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Å–≤—è–∑–∏ —Å —Ç–µ–ø–ª–æ–≤—ã–º –Ω–∞—Å–æ—Å–æ–º!

## üì° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ß—Ç–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
```python
# Python —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π pymodbus
from pymodbus.client.sync import ModbusSerialClient

client = ModbusSerialClient(method='rtu', port='COM1', baudrate=9600)
client.connect()

# –ß—Ç–µ–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –Ω–∞ –≤—Ö–æ–¥–µ (—Ä–µ–≥–∏—Å—Ç—Ä 0x0010)
result = client.read_input_registers(0x0010, 1, unit=1)
temp_inlet = result.registers[0] / 100.0  # –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∏–∑ ¬∞C*100

# –ß—Ç–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç–µ–ø–ª–æ–≤–æ–≥–æ –Ω–∞—Å–æ—Å–∞ (—Ä–µ–≥–∏—Å—Ç—Ä 0x0030)
result = client.read_input_registers(0x0030, 1, unit=1)
heatpump_state = result.registers[0]  # 0 –∏–ª–∏ 1

client.close()
```

### –ó–∞–ø–∏—Å—å –∫–æ–º–∞–Ω–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
```python
# –í–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–ø–ª–æ–≤–æ–≥–æ –Ω–∞—Å–æ—Å–∞ (—Ä–µ–≥–∏—Å—Ç—Ä 0x1000)
result = client.write_register(0x1000, 1, unit=1)

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –ì–í–° 55¬∞C (—Ä–µ–≥–∏—Å—Ç—Ä 0x1024)
result = client.write_register(0x1024, 5500, unit=1)  # 55¬∞C * 100

# –ë—ã—Å—Ç—Ä–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞—Å–æ—Å–∞ (coil 0x2002)
result = client.write_coil(0x2002, True, unit=1)
```

### LabVIEW –ø—Ä–∏–º–µ—Ä
```labview
// –ß—Ç–µ–Ω–∏–µ Input Registers
Modbus Master Read Holding Registers.vi
Device Address: 1
Starting Address: 16 (0x0010)
Number of Registers: 1

// –ó–∞–ø–∏—Å—å Holding Registers  
Modbus Master Write Holding Registers.vi
Device Address: 1
Starting Address: 4096 (0x1000)
Values: [1]  // –í–∫–ª—é—á–∏—Ç—å —Ç–µ–ø–ª–æ–≤–æ–π –Ω–∞—Å–æ—Å
```

### SCADA —Å–∏—Å—Ç–µ–º—ã
- **WinCC**: Modbus RTU Slave Driver
- **iFix**: Modbus RTU Driver
- **Wonderware**: Modbus RTU I/O Driver
- **FactoryTalk**: Modbus RTU Driver

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ menuconfig
```bash
idf.py menuconfig
```

–í—ã–±–µ—Ä–∏—Ç–µ:
- **Component config ‚Üí Modbus configuration**
- **HeishaMon MODBUS Configuration**

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `CONFIG_MB_UART_TXD` - GPIO –¥–ª—è TX
- `CONFIG_MB_UART_RXD` - GPIO –¥–ª—è RX  
- `CONFIG_MB_UART_RTS` - GPIO –¥–ª—è RTS
- `CONFIG_MB_UART_PORT_NUM` - –ù–æ–º–µ—Ä UART (2)
- `CONFIG_MB_SLAVE_ADDR` - –ê–¥—Ä–µ—Å slave (1)
- `CONFIG_MB_UART_BAUD_RATE` - –°–∫–æ—Ä–æ—Å—Ç—å (9600)

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞
- `heishamon_modbus.h/c` - –û—Å–Ω–æ–≤–Ω–æ–π MODBUS slave
- `heishamon_modbus_params.h/c` - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤
- `heishamon_commands.c` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–æ–º–∞–Ω–¥–∞–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
1. **MODBUS Slave** ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ master
2. **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤** ‚Üí —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
3. **–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–ø–∏—Å–∏** ‚Üí –≤—ã–∑–æ–≤ –∫–æ–º–∞–Ω–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** ‚Üí —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Ç–µ–ø–ª–æ–≤—ã–º –Ω–∞—Å–æ—Å–æ–º

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞**: < 10ms
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**: 01, 02, 03, 04, 05, 06, 15, 16
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤**: 4096
- **–ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: 10Hz

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤
- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥** - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è
- ‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è** - –∫–æ–Ω—Ç—Ä–æ–ª—å –≥—Ä–∞–Ω–∏—Ü —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

MODBUS –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å **–ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤** –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏:

- ‚úÖ **SCADA —Å–∏—Å—Ç–µ–º—ã** (WinCC, iFix, Wonderware)
- ‚úÖ **–ü–õ–ö** (Siemens, Allen-Bradley, Schneider)
- ‚úÖ **HMI –ø–∞–Ω–µ–ª–∏** (Proface, Weintek, Delta)
- ‚úÖ **IoT –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã** (Node-RED, OpenHAB)
- ‚úÖ **–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ** (Python, C#, LabVIEW)

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ **¬∞C √ó 100** –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏
- –í—Å–µ –º–æ—â–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ **kW √ó 100**
- –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è **–º–≥–Ω–æ–≤–µ–Ω–Ω–æ** –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –≤ —Ä–µ–≥–∏—Å—Ç—Ä—ã
- –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã (coils) —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –°—Ç–∞—Ç—É—Å—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è **–≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** –∏–∑ –¥–∞–Ω–Ω—ã—Ö —Ç–µ–ø–ª–æ–≤–æ–≥–æ –Ω–∞—Å–æ—Å–∞
